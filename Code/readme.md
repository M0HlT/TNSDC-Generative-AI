the entire code of for textGen
